---

- hosts:
    - clusterNodes
    - clusterSeedNodes:!clusterNodes
  gather_facts: true
  pre_tasks:
    - name: Including system upgrade role
      import_role:
        name: systemUpgrade
      when: systemUpgradeRequired

    - name: Including java role
      import_role:
        name: java

  roles:
    - common
    - install
    - configure
    - service

- hosts:
    - clusterNodes
    - clusterSeedNodes:!clusterNodes
  gather_facts: false
  serial: 1
  tasks:
    - name: Starting all seed nodes and then other nodes
      import_role:
        name: service
        tasks_from: cassandraState
      vars:
        cassandraState: started